# ç¬¬11ç« ï¼šDTOã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æ··ãœãªã„ï¼ˆå¤‰æ›ã®è¨­è¨ˆï¼‰ğŸ“¦ğŸ”âœ¨

ã“ã®ç« ã¯ã²ã¨ã“ã¨ã§è¨€ã†ã¨â€¦
**ã€ŒAPIã§ã‚‚ã‚‰ã£ãŸå½¢ï¼ˆDTOï¼‰ã‚’ã€ãã®ã¾ã¾ã‚¢ãƒ—ãƒªã®ä¸­æ ¸ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ã«å…¥ã‚Œãªã„ã§ã­ï¼ã€**ã£ã¦è©±ã ã‚ˆã€œâ˜ºï¸ğŸ’–

---

### 1. ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ğŸ¯âœ¨

æœ€å¾Œã¾ã§ã‚„ã‚‹ã¨ã€ã“ã‚“ãªåŠ›ãŒã¤ãã‚ˆã€œï¼ğŸ’ªğŸŒ¸

* DTOï¼ˆé€šä¿¡ã®éƒ½åˆã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã¨ã€Domainï¼ˆæ¥­å‹™ã®éƒ½åˆã®ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’åŒºåˆ¥ã§ãã‚‹ğŸ§ âœ¨
* **å¤‰æ›ï¼ˆmappingï¼‰ã‚’â€œå¢ƒç•Œâ€ã«ç½®ã**ç†ç”±ãŒè…¹è½ã¡ã™ã‚‹ğŸšªğŸ”
* æ¬ æãƒ»å‘½åé•ã„ãƒ»å˜ä½é•ã„ã‚’ã€Œå¤‰æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§å¸åã€ã§ãã‚‹ğŸ§½âœ¨
* å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’ **unknown â†’ æ¤œè¨¼ â†’ å¤‰æ› â†’ ãƒ‰ãƒ¡ã‚¤ãƒ³** ã®æµã‚Œã§å®‰å…¨ã«æ‰±ãˆã‚‹ğŸ›¡ï¸ğŸŒˆ

---

### 2. ã¾ãšçµè«–ï¼šDTOã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯â€œåˆ¥ç‰©ã§OKâ€ğŸ™†â€â™€ï¸ğŸ’–

* **DTO**ï¼šå¤–ã‹ã‚‰æ¥ãŸãƒ‡ãƒ¼ã‚¿ã®ã€Œç®±ã€ğŸ“¦ï¼ˆé€šä¿¡ãƒ»ä¿å­˜ã®éƒ½åˆãŒæœ€å„ªå…ˆï¼‰
* **Domain**ï¼šã‚¢ãƒ—ãƒªãŒå®ˆã‚ŠãŸã„ã€Œæ„å‘³ã€ğŸ§ âœ¨ï¼ˆæ¥­å‹™ãƒ«ãƒ¼ãƒ«ãƒ»å‹ãƒ»å®‰å…¨ãŒæœ€å„ªå…ˆï¼‰

DTOã®å®šç¾©ã¨ã—ã¦ã€Martin Fowlerã¯ã€Œãƒ—ãƒ­ã‚»ã‚¹é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’é‹ã¶ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã£ã¦èª¬æ˜ã—ã¦ã‚‹ã‚ˆğŸ“¦ğŸššï¼ˆã–ã£ãã‚Šï¼šé ãã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ãŸã‚ã®å…¥ã‚Œç‰©ï¼ï¼‰ ([martinfowler.com][1])
ã•ã‚‰ã«ã€Œãƒ­ãƒ¼ã‚«ãƒ«ãªæ–‡è„ˆã§ã¯DTOã¯ä¸è¦ã©ã“ã‚ã‹å®³ã«ãªã‚Šã†ã‚‹ã€ã£ã¦è¶£æ—¨ã‚‚æ›¸ã„ã¦ã‚‹ï¼ˆï¼æ··ãœã‚‹ã¨ãƒ„ãƒ©ããªã‚‹æ–¹å‘ã«è¡ŒããŒã¡ï¼‰ğŸ˜‡ğŸ’¥ ([martinfowler.com][2])

---

### 3. â€œæ··ãœã‚‹ã¨äº‹æ•…ã‚‹â€ã‚ã‚‹ã‚ã‚‹ğŸ˜µâ€ğŸ’«ğŸ’¥

#### ã‚ã‚‹ã‚ã‚‹â‘ ï¼šAPIã®éƒ½åˆãŒãƒ‰ãƒ¡ã‚¤ãƒ³ã«ä¾µå…¥ã™ã‚‹ğŸŒ€

* APIã® `snake_case` ãŒãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã‚‚åºƒãŒã‚‹ğŸ
* `null` ãŒæ··ã–ã£ã¦ã€ã‚ã¡ã“ã¡ã§ `?.` åœ°ç„ã«ãªã‚‹ğŸ˜‡
* æ•°å€¤ãŒæ–‡å­—åˆ—ã§æ¥ã¦ã€è¨ˆç®—ãŒã©ã“ã‹ã§å£Šã‚Œã‚‹ğŸ’¥

#### ã‚ã‚‹ã‚ã‚‹â‘¡ï¼šä»•æ§˜å¤‰æ›´ãŒç›´æ’ƒã™ã‚‹âš¡

APIãŒã¡ã‚‡ã£ã¨å¤‰ã‚ã£ãŸã ã‘ã§
**ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚„ã‚¢ãƒ—ãƒªå±¤ã®ã‚ã¡ã“ã¡ãŒåŒæ™‚ã«å£Šã‚Œã‚‹** â†’ ä¿®æ­£ãŒæ€–ã„ğŸ˜±

#### ã‚ã‚‹ã‚ã‚‹â‘¢ï¼šãƒ†ã‚¹ãƒˆãŒã¤ã‚‰ã„ğŸ§ªğŸ’¦

ã€Œã“ã®é–¢æ•°ã€DTOå‰æï¼Ÿãƒ‰ãƒ¡ã‚¤ãƒ³å‰æï¼Ÿã©ã£ã¡â€¦ï¼Ÿã€ã£ã¦ãªã‚‹ğŸ˜µâ€ğŸ’«

---

### 4. æ­£ã—ã„ç½®ãå ´æ‰€ï¼šå¤‰æ›ï¼ˆmappingï¼‰ã¯â€œå¢ƒç•Œâ€ğŸšªğŸ”âœ¨

![DTO to Domain Mapper](./picture/soc_ts_study_011_mapper.png)


ã“ã“ãŒè¶…é‡è¦ã ã‚ˆã€œï¼ğŸ“ŒğŸ’–

* **å¤–å´**ï¼ˆé€šä¿¡ãƒ»æ°¸ç¶šåŒ–ãƒ»UIï¼‰ â†’ å½¢ãŒã‚³ãƒ­ã‚³ãƒ­å¤‰ã‚ã‚ŠãŒã¡ğŸŒªï¸
* **å†…å´**ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰ â†’ å¤‰ãˆãŸããªã„ã€‚å®ˆã‚ŠãŸã„ğŸ›¡ï¸

ã ã‹ã‚‰ã€**å¢ƒç•Œã§ä¸€å› â€œæ•´å½¢â€ ã—ã¦ã‹ã‚‰ä¸­ã«å…¥ã‚Œã‚‹**ã®ãŒæœ€å¼·âœ¨

ã‚¤ãƒ¡ãƒ¼ã‚¸ğŸ‘‡ğŸ˜Š

* ğŸŒ å¤–éƒ¨ï¼ˆAPI/DBï¼‰
  â†’ ğŸ“¦ DTO
  â†’ ğŸšª Mapperï¼ˆå¤‰æ›ï¼‰
  â†’ ğŸ§  Domainï¼ˆå®‰å®šï¼‰

```mermaid
flowchart LR
    API[External API ğŸŒ] --> DTO[DTO Structure ğŸ“¦]
    DTO --> Mapper[Mapper ğŸšª]
    Mapper --> Domain[Domain Object ğŸ§ ]
    
    subgraph Boundary [Conversion Layer]
        DTO
        Mapper
    end
    
    subgraph Core [Domain Layer]
        Domain
    end
    
    style API fill:#e8f5e9
    style DTO fill:#f5f5f5
    style Mapper fill:#fff9c4
    style Domain fill:#e1f5fe
```

---

### 5. å®Ÿè·µã®å‹ï¼šunknown â†’ æ¤œè¨¼ â†’ å¤‰æ› â†’ Domain ğŸ›¡ï¸ğŸ”

å¤–éƒ¨ã‹ã‚‰æ¥ã‚‹ãƒ‡ãƒ¼ã‚¿ã£ã¦ã€TypeScriptçš„ã«ã¯ã»ã‚“ã¨ã¯ **ä¿¡ç”¨ã§ããªã„**ã‚“ã ã‚ˆã­ğŸ¥º
ã ã‹ã‚‰æµã‚Œã‚’å›ºå®šã—ã¡ã‚ƒã†ã®ãŒã‚ªã‚¹ã‚¹ãƒ¡âœ¨

1. APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ **unknown** ã¨ã—ã¦å—ã‘ã‚‹ğŸ«§
2. **ã‚¹ã‚­ãƒ¼ãƒã§æ¤œè¨¼**ï¼ˆå½¢ãƒ»å‹ãƒ»å¿…é ˆãƒã‚§ãƒƒã‚¯ï¼‰âœ…
3. **DTO â†’ Domain ã«å¤‰æ›**ï¼ˆå‘½åãƒ»å˜ä½ãƒ»æ¬ æå¸åï¼‰ğŸ§½
4. Domainã ã‘ã‚’ã‚¢ãƒ—ãƒªä¸­æ ¸ã§ä½¿ã†ğŸ§ ğŸ›¡ï¸

ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ãŸã¨ãˆã° **Zod**ï¼ˆTS-first validationï¼‰ã‚„ **Valibot**ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ã§å‹å®‰å…¨ãªã‚¹ã‚­ãƒ¼ãƒï¼‰ã¿ãŸã„ãªã®ãŒã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚ˆã€œâœ¨ ([Zod][3])
Zodã¯ã€ŒZod 4 stableã€ã¿ãŸã„ã«ç¶™ç¶šçš„ã«é€²åŒ–ã—ã¦ã‚‹ã®ã‚‚ãƒã‚¤ãƒ³ãƒˆã ã‚ˆğŸ“ˆ ([Zod][4])

ï¼ˆã¡ãªã¿ã« TypeScript ã®æœ€æ–°ã¯ç¾åœ¨ 5.9 ã¨æ¡ˆå†…ã•ã‚Œã¦ã‚‹ã‚ˆğŸ§¡ï¼‰ ([typescriptlang.org][5])

---

## 6. ãƒŸãƒ‹ã‚±ãƒ¼ã‚¹ï¼šã‚«ãƒ•ã‚§æ³¨æ–‡â˜•ğŸ°ï¼ˆDTO â†’ Domain å¤‰æ›ã—ã¦ã¿ã‚ˆã†ï¼ï¼‰

### 6-1. ä¾‹ï¼šAPIãŒè¿”ã™DTOï¼ˆé€šä¿¡ã®éƒ½åˆï¼‰ğŸ“¦ğŸŒ

APIã¯ã“ã‚“ãªJSONã‚’è¿”ã—ã¦ãã‚‹ã¨ã™ã‚‹ã­ğŸ‘‡

```ts
// APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼ˆDTOï¼‰
{
  "order_id": "ord_1001",
  "total_price": "1200",        // æ–‡å­—åˆ—ã§æ¥ã‚‹ğŸ˜‡
  "created_at": "2026-01-10T12:34:56Z",
  "items": [
    { "product_id": "cake_01", "qty": 2, "unit_price": 400 },
    { "product_id": "coffee_02", "qty": 1, "unit_price": 400 }
  ],
  "status": "PAID"
}
```

DTOã¯ã“ã†ã„ã†ã€Œå‘ã“ã†éƒ½åˆã®å½¢ã€ã§OKğŸ™†â€â™€ï¸ï¼ˆã‚€ã—ã‚ãã†ãªã‚‹ï¼ï¼‰

---

### 6-2. ã“ã£ã¡ãŒæ¬²ã—ã„Domainï¼ˆæ¥­å‹™ã®éƒ½åˆï¼‰ğŸ§ ğŸ›¡ï¸

ãƒ‰ãƒ¡ã‚¤ãƒ³å´ã§ã¯ã€ã“ã†ã„ã†å½¢ã§ä½¿ã„ãŸã„ã‚ˆã­âœ¨
ï¼ˆå‘½åã¯camelCaseã€å€¤ã¯ä¿¡ç”¨ã§ãã‚‹å‹ã€æ„å‘³ãŒä¼ã‚ã‚‹ï¼ï¼‰

```ts
// Domainï¼ˆã‚¢ãƒ—ãƒªä¸­æ ¸ã§ä½¿ã„ãŸã„å½¢ï¼‰
type OrderId = string & { readonly __brand: "OrderId" };
type Yen = number & { readonly __brand: "Yen" };

type OrderStatus = "paid" | "unpaid" | "cancelled";

type OrderItem = Readonly<{
  productId: string;
  qty: number;
  unitPrice: Yen;
}>;

type Order = Readonly<{
  id: OrderId;
  totalPrice: Yen;
  createdAt: Date;
  items: readonly OrderItem[];
  status: OrderStatus;
}>;
```

---

### 6-3. Zodã§ã€ŒDTOã®å½¢ã€ã‚’æ¤œè¨¼ã™ã‚‹âœ…âœ¨

ã“ã“ã§ã®ä¸»å½¹ã¯ **DTOã‚¹ã‚­ãƒ¼ãƒ**ï¼ğŸ“¦âœ…
â€œå¤–ã‹ã‚‰æ¥ãŸã‚‚ã®â€ã‚’ä¸€å›ã“ã“ã§ç¢ºå®šã•ã›ã‚‹ã‚ˆã€œğŸ›¡ï¸

```ts
import { z } from "zod";

const OrderDtoSchema = z.object({
  order_id: z.string(),
  total_price: z.coerce.number(), // "1200" â†’ 1200 ã«ã—ã¦ãã‚Œã‚‹âœ¨
  created_at: z.string().datetime(),
  items: z.array(
    z.object({
      product_id: z.string(),
      qty: z.number().int().positive(),
      unit_price: z.number().int().nonnegative(),
    })
  ),
  status: z.enum(["PAID", "UNPAID", "CANCELLED"]),
});

type OrderDto = z.infer<typeof OrderDtoSchema>;
```

---

### 6-4. DTO â†’ Domain ã®å¤‰æ›ï¼ˆMapperï¼‰ğŸšªğŸ”âœ¨

å‘½åé•ã„ã€å‹é•ã„ã€å˜ä½é•ã„â€¦ãœã‚“ã¶ã“ã“ã§å¸åã—ã‚ˆã†ğŸ§½ğŸ’–

```ts
function asOrderId(value: string): OrderId {
  // æœ¬å½“ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‚OKâœ¨
  return value as OrderId;
}

function asYen(value: number): Yen {
  // ä¾‹ï¼šè² æ•°ç¦æ­¢ãªã©ã€ãƒ‰ãƒ¡ã‚¤ãƒ³æ¡ä»¶ã‚’ã“ã“ã§å®ˆã‚‹ğŸ›¡ï¸
  if (!Number.isFinite(value) || value < 0) {
    throw new Error("Invalid Yen value");
  }
  return value as Yen;
}

function mapStatus(dto: OrderDto["status"]): OrderStatus {
  switch (dto) {
    case "PAID":
      return "paid";
    case "UNPAID":
      return "unpaid";
    case "CANCELLED":
      return "cancelled";
  }
}

export function mapOrderDtoToDomain(dto: OrderDto): Order {
  return {
    id: asOrderId(dto.order_id),
    totalPrice: asYen(dto.total_price),
    createdAt: new Date(dto.created_at),
    status: mapStatus(dto.status),
    items: dto.items.map((it) => ({
      productId: it.product_id,
      qty: it.qty,
      unitPrice: asYen(it.unit_price),
    })),
  };
}
```

**ã“ã‚Œã§å®Œæˆï¼**ğŸ‰
ä»¥é™ã€ã‚¢ãƒ—ãƒªã®ä¸­æ ¸ã§ã¯ **OrderDto ã‚’è§¦ã‚‰ãªã„**ã‚ˆã†ã«ã§ãã‚‹ã‚ˆã€œğŸ§¡

---

### 6-5. ã¾ã¨ã‚ã¦ä½¿ã†ï¼ˆFetch â†’ Parse â†’ Mapï¼‰ğŸŒâœ…ğŸ”

```ts
export async function fetchOrder(orderId: string): Promise<Order> {
  const res = await fetch(`/api/orders/${orderId}`);
  const json: unknown = await res.json();

  const dto = OrderDtoSchema.parse(json);     // âœ… å½¢ã‚’ç¢ºå®š
  return mapOrderDtoToDomain(dto);            // âœ… æ„å‘³ã®å½¢ã«å¤‰æ›
}
```

---

## 7. å¤‰æ›ã§å¸åã™ã‚‹â€œã‚ˆãã‚ã‚‹å·®â€ãƒªã‚¹ãƒˆğŸ§½âœ¨

Mapperã«ç½®ãã¨æ°—æŒã¡ã‚ˆãå¸åã§ãã‚‹å·®ğŸ‘‡ğŸ˜

* å‘½åé•ã„ï¼š`order_id` â†” `id` ğŸâ¡ï¸ğŸ«
* å‹é•ã„ï¼š`"1200"` â†” `1200` ğŸ”
* æ¬ æï¼š`items` ãŒç©º / `null` ãŒæ¥ã‚‹ ğŸ˜‡
* å˜ä½é•ã„ï¼š`price_cents` â†” `yen` ğŸ’±
* enumé•ã„ï¼š`PAID` â†” `"paid"` ğŸ”¤
* æ—¥ä»˜ï¼šISOæ–‡å­—åˆ— â†” `Date` ğŸ•’

---

## 8. â€œå¢ƒç•Œã§æ­¢ã‚ã‚‹â€ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆâœ…ğŸšª

å®Ÿè£…ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã“ã®ã¸ã‚“è¦‹ã‚Œã‚‹ã¨å¼·ã„ã‚ˆã€œğŸ’ªâœ¨

* DTOã®å‹ãŒ **Domain/Application** ã«æµã‚Œã¦ãªã„ï¼Ÿï¼ˆimportã•ã‚Œã¦ãªã„ï¼Ÿï¼‰ğŸ§¼
* fetchç›´å¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚’ `any` ã§æ¡ã‚Šã¤ã¶ã—ã¦ãªã„ï¼ŸğŸ™…â€â™€ï¸
* unknown â†’ ã‚¹ã‚­ãƒ¼ãƒ â†’ Domain ã«ãªã£ã¦ã‚‹ï¼ŸğŸ›¡ï¸
* mapperã¯ã€Œå¤‰æ›ã ã‘ã€ã«ãªã£ã¦ã‚‹ï¼Ÿï¼ˆæ¥­å‹™ãƒ­ã‚¸ãƒƒã‚¯ã‚’å¢—ã‚„ã—ã™ãã¦ãªã„ï¼Ÿï¼‰ğŸ°
* ä¾‹å¤–æ™‚ã®æ‰±ã„ãŒæ±ºã¾ã£ã¦ã‚‹ï¼Ÿï¼ˆthrow / Result / ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºï¼‰ğŸš¨

---

## 9. ãƒ†ã‚¹ãƒˆã®æœ€çŸ­ã‚»ãƒƒãƒˆğŸ§ªğŸŒ¸ï¼ˆMapperã¯è¶…ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ï¼ï¼‰

Mapperã¯ç´”ç²‹é–¢æ•°ã£ã½ãã§ãã‚‹ã‹ã‚‰ãƒ†ã‚¹ãƒˆå‘ãğŸ’–

```ts
import { describe, it, expect } from "vitest";
import { mapOrderDtoToDomain } from "./orderMapper";

describe("mapOrderDtoToDomain", () => {
  it("DTOã‚’Domainã«å¤‰æ›ã§ãã‚‹", () => {
    const dto = {
      order_id: "ord_1001",
      total_price: 1200,
      created_at: "2026-01-10T12:34:56Z",
      status: "PAID",
      items: [{ product_id: "cake_01", qty: 2, unit_price: 400 }],
    } as const;

    const order = mapOrderDtoToDomain(dto);

    expect(order.id).toBe("ord_1001");
    expect(order.totalPrice).toBe(1200);
    expect(order.status).toBe("paid");
    expect(order.items[0]?.productId).toBe("cake_01");
  });
});
```

---

## 10. AIæ´»ç”¨ã‚³ãƒ„ğŸ¤–ğŸï¼ˆDTOâ†’Domainå¤‰æ›ã¯AIãŒå¾—æ„ï¼ï¼‰

AIã«æŠ•ã’ã‚‹ã¨ãã¯ã€**ææ–™ã‚’ã¡ã‚ƒã‚“ã¨æ¸¡ã™**ã®ãŒå‹ã¡âœ¨

### ãã®ã¾ã¾ä½¿ãˆã‚‹æŒ‡ç¤ºä¾‹ï¼ˆã‚³ãƒ”ãƒšOKï¼‰ğŸ“ğŸ’–

* ã€Œã“ã®JSONä¾‹ãŒAPI DTOã§ã™ã€‚Zodã‚¹ã‚­ãƒ¼ãƒã¨ã€Domainå‹ï¼ˆbrandä»˜ãï¼‰ã¨ã€DTOâ†’Domain mapperã‚’ä½œã£ã¦ã€‚æ¬ æãƒ»å‹é•ã„ï¼ˆæ–‡å­—åˆ—æ•°å€¤ï¼‰ã‚‚è€ƒæ…®ã—ã¦ã€‚vitestã§ãƒ†ã‚¹ãƒˆã‚‚3æœ¬æ›¸ã„ã¦ï¼ˆæ­£å¸¸/æ¬ æ/ç•°å¸¸å€¤ï¼‰ã€‚ã€

### æ³¨æ„ãƒã‚¤ãƒ³ãƒˆâš ï¸ğŸ˜‡

* AIã¯å¹³æ°—ã§ `as any` ã‚’æ··ãœã‚‹ã“ã¨ãŒã‚ã‚‹ â†’ **ç¦æ­¢**ã£ã¦å…ˆã«è¨€ã†ğŸ™…â€â™€ï¸
* â€œã©ã“ã¾ã§å¤‰æ›ã™ã‚‹ã‹â€ã‚’æŒ‡å®šã—ãªã„ã¨ã€å¤‰æ›ãŒæ•£ã‚‹ğŸŒ€
  â†’ ã€Œå¢ƒç•Œï¼ˆfetchç›´å¾Œï¼‰ã§ã ã‘å¤‰æ›ã€ã£ã¦æ˜è¨˜ã™ã‚‹ã¨è‰¯ã„ã‚ˆğŸšªâœ¨

---

## 11. ãƒŸãƒ‹æ¼”ç¿’ğŸ€âœï¸ï¼ˆ15ã€œ30åˆ†ï¼‰

### æ¼”ç¿’Aï¼šå‘½åé•ã„ã‚’å¸åã—ã‚ˆã†ğŸâ¡ï¸ğŸ«

* `user_name` ã‚’ `userName` ã«ã™ã‚‹
* `created_at` ã‚’ `Date` ã«ã™ã‚‹

### æ¼”ç¿’Bï¼šå˜ä½é•ã„ã‚’å¸åã—ã‚ˆã†ğŸ’±

* APIï¼š`price_cents: 399`
* Domainï¼š`yen: 399`ï¼ˆor 3.99ãƒ‰ãƒ«â†’å††â€¦ã¿ãŸã„ã«å¤‰æ›ãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ã¦ã‚‚OKï¼‰

### æ¼”ç¿’Cï¼šæ¬ æã«å¼·ãã—ã‚ˆã†ğŸ§½

* `items` ãŒç„¡ã„ã¨ãã¯ `[]` æ‰±ã„ã«ã™ã‚‹
* `status` ãŒæœªçŸ¥ã®å€¤ãªã‚‰ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ï¼ˆor `"unpaid"` ã«å¯„ã›ã‚‹ï¼‰

---

## 12. ã“ã®ç« ã®ã¾ã¨ã‚ğŸ‰ğŸ’–

* DTOã¨Domainã¯**åˆ¥ã§OK**ã€‚ã‚€ã—ã‚åˆ†ã‘ãŸã»ã†ãŒå¼·ã„ğŸ“¦ğŸ§ 
* å¤‰æ›ï¼ˆmappingï¼‰ã¯ **å¢ƒç•Œï¼ˆå¤–â†’å†…ã®å…¥å£ï¼‰** ã«ç½®ãğŸšªğŸ”
* unknown â†’ æ¤œè¨¼ â†’ å¤‰æ› â†’ Domain ã®æµã‚Œã‚’å›ºå®šã™ã‚‹ã¨äº‹æ•…ãŒæ¸›ã‚‹ğŸ›¡ï¸âœ¨
* Mapperã¯ãƒ†ã‚¹ãƒˆã—ã‚„ã™ã„ã‹ã‚‰ã€å®‰å¿ƒã—ã¦è‚²ã¦ã‚‰ã‚Œã‚‹ğŸ§ªğŸŒ¸

---

æ¬¡ã®ç« ï¼ˆç¬¬12ç« ï¼‰ã§ã¯ã€ã“ã“ã§ä½œã£ãŸã€Œå¢ƒç•Œã€ã‚’ã•ã‚‰ã«å¼·ãã™ã‚‹ãŸã‚ã«ã€**ä¾å­˜ã®å‘ãï¼ˆDIPã®å…¥å£ï¼‰**ã‚’SoCã¨ã—ã¦ä½“é¨“ã—ã¦ã„ãã‚ˆã€œğŸ§²ğŸŒŸ

[1]: https://martinfowler.com/eaaCatalog/dataTransferObject.html?utm_source=chatgpt.com "Data Transfer Object"
[2]: https://martinfowler.com/bliki/LocalDTO.html?utm_source=chatgpt.com "Local D T O"
[3]: https://zod.dev/?utm_source=chatgpt.com "Zod: Intro"
[4]: https://zod.dev/v4?utm_source=chatgpt.com "Release notes"
[5]: https://www.typescriptlang.org/download/?utm_source=chatgpt.com "How to set up TypeScript"
