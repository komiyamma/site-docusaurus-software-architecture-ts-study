# ç¬¬5ç« ï¼šSagaã®åŸºæœ¬å½¢ï¼ˆé †æ–¹å‘ï¼‹è£œå„Ÿã®ãƒšã‚¢ï¼‰ğŸ§±ğŸ”„

---

## ã“ã®ç« ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ğŸ¯âœ¨

* Sagaã‚’ã€Œ**é †æ–¹å‘ï¼ˆStepï¼‰**ã€ã¨ã€Œ**è£œå„Ÿï¼ˆCompensationï¼‰**ã€ã®**ãƒšã‚¢**ã§è€ƒãˆã‚‰ã‚Œã‚‹ğŸ§ ğŸ’¡
* å¤±æ•—ã—ãŸã¨ãã«ã€Œã©ã“ã¾ã§é€²ã‚“ã ï¼Ÿã€ã€Œä½•ã‚’æˆ»ã™ï¼Ÿã€ã‚’**è¿·ã‚ãšæ›¸ãå‡ºã›ã‚‹**ğŸ“âœ…
* ä»£è¡¨ä¾‹ï¼ˆæ³¨æ–‡ãƒ•ãƒ­ãƒ¼ï¼‰ã‚’ã€Step/è£œå„Ÿã®å¯¾å¿œè¡¨ã§æ•´ç†ã§ãã‚‹ğŸ›’ğŸ’³ğŸ“¦

---

# 5-1. Sagaã®â€œåŸºæœ¬å½¢â€ã¯ã‚³ãƒ¬ï¼ğŸ§±âœ¨

Sagaã¯ã€ã–ã£ãã‚Šè¨€ã†ã¨ã“ã†ã„ã†ç™ºæƒ³ã§ã™ğŸ‘‡

* å¤§ãã„å‡¦ç†ã‚’ã€å°ã•ãªå‡¦ç†ï¼ˆ= **ãƒ­ãƒ¼ã‚«ãƒ«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**ï¼‰ã«åˆ†ã‘ã‚‹âœ‚ï¸
* é€”ä¸­ã§å¤±æ•—ã—ãŸã‚‰ã€**å®Œäº†æ¸ˆã¿ã®åˆ†ã ã‘**ã€Œå–ã‚Šæ¶ˆã—ã€ã‚’é †ç•ªã«å®Ÿè¡Œã™ã‚‹ğŸ”
* ã¤ã¾ã‚Šã€**æˆåŠŸãƒ«ãƒ¼ãƒˆï¼ˆé †æ–¹å‘ï¼‰**ã¨**å¤±æ•—ãƒ«ãƒ¼ãƒˆï¼ˆè£œå„Ÿï¼‰**ãŒã‚»ãƒƒãƒˆğŸ’

ã“ã®è€ƒãˆæ–¹è‡ªä½“ã¯ã€Azureã‚„AWSã®è§£èª¬ã§ã‚‚ã€Œãƒ­ãƒ¼ã‚«ãƒ«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®é€£é–ï¼‹å¤±æ•—æ™‚ã¯è£œå„Ÿã§æˆ»ã™ã€ã£ã¦èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚([Microsoft Learn][1])

---

# 5-2. Step ã¨ Compensation ã‚’â€œãƒšã‚¢â€ã§æŒã¤ç†ç”±ğŸ§ ğŸ”„

## âœ… Stepï¼ˆé †æ–¹å‘å‡¦ç†ï¼‰ã£ã¦ï¼Ÿ

ã€Œå‰ã«é€²ã‚ã‚‹å‡¦ç†ã€ã§ã™ğŸš¶â€â™€ï¸âœ¨
ä¾‹ï¼š

* æ±ºæ¸ˆã‚’ç¢ºå®šã™ã‚‹
* åœ¨åº«ã‚’ç¢ºä¿ã™ã‚‹
* ç™ºé€ã‚’é–‹å§‹ã™ã‚‹

## ğŸ§¯ Compensationï¼ˆè£œå„Ÿå‡¦ç†ï¼‰ã£ã¦ï¼Ÿ

ã€Œé€²ã‚ãŸå‡¦ç†ã®å½±éŸ¿ã‚’â€œå–ã‚Šæ¶ˆã™/æ‰“ã¡æ¶ˆã™â€å‡¦ç†ã€ã§ã™ğŸ§¯
ä¾‹ï¼š

* æ±ºæ¸ˆã®å–æ¶ˆãƒ»è¿”é‡‘
* åœ¨åº«ã®ç¢ºä¿è§£é™¤
* ç™ºé€ã®å–æ¶ˆï¼ˆå¯èƒ½ãªã‚‰ï¼‰

Azureã®ã€ŒCompensating Transactionã€ã‚„Sagaã®èª¬æ˜ã§ã‚‚ã€å¤±æ•—å›å¾©ã¯â€œè£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³â€ã§è¡Œã†ã£ã¦æ•´ç†ã•ã‚Œã¦ã¾ã™ã€‚([Microsoft Learn][2])

![Step/Compensation Pairs](./picture/saga_ts_study_005_step_pair.png)

---

# 5-3. å›³ã§ã¤ã‹ã‚€ï¼ã€ŒæˆåŠŸã®æµã‚Œã€ã¨ã€Œå¤±æ•—æ™‚ã®æˆ»ã—ã€ğŸ—ºï¸âœ¨

## âœ… æˆåŠŸãƒ‘ã‚¹ï¼ˆé †æ–¹å‘ï¼‰

```
Step1 â†’ Step2 â†’ Step3 â†’ å®Œäº†ğŸ‰
```

## âŒ å¤±æ•—ãƒ‘ã‚¹ï¼ˆè£œå„Ÿã¯é€†å‘ããŒåŸºæœ¬ï¼‰

```
Step1 â†’ Step2 â†’ Step3(å¤±æ•—ğŸ’¥)
          â†‘       â†“
      Comp2 â† Comp1ï¼ˆé€†é †ã§æˆ»ã™ğŸ”ï¼‰
```

ã€Œå¤±æ•—ã—ãŸã‚‰ã€ã™ã§ã«çµ‚ã‚ã£ãŸåˆ†ã®å¤‰æ›´ã‚’è£œå„Ÿã§å–ã‚Šæ¶ˆã™ã€ã£ã¦ã„ã†èª¬æ˜ã¯AWSã®Sagaãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚‚åŒã˜ã§ã™ã€‚([AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ][3])

---

# 5-4. ä¾‹ï¼šæ³¨æ–‡ãƒ•ãƒ­ãƒ¼ã§â€œãƒšã‚¢è¡¨â€ã‚’ä½œã‚ã†ğŸ›’ğŸ’³ğŸ“¦

ã“ã“ã§ã¯åˆ†ã‹ã‚Šã‚„ã™ãã€ã“ã†ã„ã†æµã‚Œã«ã—ã¾ã™ğŸ‘‡

1. æ³¨æ–‡ã‚’ä½œã‚‹ï¼ˆOrderï¼‰ğŸ§¾
2. æ±ºæ¸ˆã™ã‚‹ï¼ˆPaymentï¼‰ğŸ’³
3. åœ¨åº«ã‚’ç¢ºä¿ã™ã‚‹ï¼ˆInventoryï¼‰ğŸ“¦
4. ç™ºé€æ‰‹é…ã™ã‚‹ï¼ˆShippingï¼‰ğŸšš

ãã—ã¦ã€**Step ã¨ Compensation ã‚’å¿…ãšã‚»ãƒƒãƒˆ**ã§è€ƒãˆã¾ã™ğŸ’

## Step/Compensation å¯¾å¿œè¡¨ï¼ˆè¶…åŸºæœ¬ï¼‰ğŸ“âœ¨

| ã‚¹ãƒ†ãƒƒãƒ—å            | Stepï¼ˆã‚„ã‚‹ã“ã¨ï¼‰âœ… | Compensationï¼ˆæˆ»ã™ã“ã¨ï¼‰ğŸ§¯ | â€œæˆ»ã›ã‚‹ï¼Ÿâ€ã®æ³¨æ„ç‚¹âš ï¸    |
| ---------------- | ----------- | -------------------- | --------------- |
| OrderCreate      | æ³¨æ–‡ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ    | æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ‰±ã„ã«ã™ã‚‹         | ç‰©ç†å‰Šé™¤ã˜ã‚ƒãªãçŠ¶æ…‹å¤‰æ›´ãŒå¤šã„ |
| PaymentCapture   | æ±ºæ¸ˆç¢ºå®š        | è¿”é‡‘/å–æ¶ˆ                | å–æ¶ˆã§ããªã„å ´åˆã¯è¿”é‡‘ã§å¯¾å¿œ  |
| InventoryReserve | åœ¨åº«å¼•å½“        | å¼•å½“è§£é™¤                 | è§£é™¤ã¯ã ã„ãŸã„å¯èƒ½       |
| ShippingArrange  | ç™ºé€æ‰‹é…        | ç™ºé€ã‚­ãƒ£ãƒ³ã‚»ãƒ«              | ç™ºé€å¾Œã¯ç„¡ç†ãªã“ã¨ãŒå¤šã„    |

ã“ã®ã€Œæˆ»ã—ã¯å¿…ãšã—ã‚‚å®Œå…¨ãªå·»ãæˆ»ã—ã˜ã‚ƒãªã„ã€å•é¡Œã¯ã€è£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‘ã‚¿ãƒ¼ãƒ³è§£èª¬ã§ã‚‚é‡è¦ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚([Microsoft Learn][2])

---

# 5-5. ãƒšã‚¢è¨­è¨ˆã®â€œãƒŸãƒ‹ãƒ«ãƒ¼ãƒ«â€5ã¤âœ…âœ¨ï¼ˆè¶…å¤§äº‹ï¼ï¼‰

## ãƒ«ãƒ¼ãƒ«1ï¼šStepã¯ã€Œå°ã•ãã€ã€Œå±€æ‰€çš„ã€ã«âœ‚ï¸

1ã¤ã®Stepã§ã€ã‚ã¡ã“ã¡ã‚’åŒæ™‚ã«å¤‰ãˆãªã„ğŸ™…â€â™€ï¸
ï¼ˆåˆ†ã‘ãŸã»ã†ãŒã€å¤±æ•—æ™‚ã«æˆ»ã—ã‚„ã™ã„ã‚ˆï¼ï¼‰

## ãƒ«ãƒ¼ãƒ«2ï¼šStepãŒæˆåŠŸã—ãŸã‚‰ã€ŒæˆåŠŸã—ãŸè¨¼æ‹ ã€ã‚’æ®‹ã™ğŸ§¾

ã‚ã¨ã§ã€Œã©ã“ã¾ã§æˆåŠŸã—ãŸï¼Ÿã€ãŒåˆ†ã‹ã‚‰ãªã„ã¨ã€æˆ»ã›ãªã„ğŸ˜µ
ï¼ˆSagaã®çŠ¶æ…‹ç®¡ç†ã¯æ¬¡ç« ä»¥é™ã§æ·±æ˜ã‚Šã™ã‚‹ã‚ˆğŸ“ï¼‰

## ãƒ«ãƒ¼ãƒ«3ï¼šCompensationã¯ã€Œé€†æ“ä½œã€ã˜ã‚ƒãªãã¦ã‚‚OKğŸ™†â€â™€ï¸

ç¾å®Ÿã«ã¯â€œå®Œå…¨ãªå·»ãæˆ»ã—â€ãŒç„¡ç†ãªã“ã¨ãŒã‚ã‚‹ğŸ˜µâ€ğŸ’«
ãã®ã¨ãã¯ã€Œæ‰“ã¡æ¶ˆã—ã€ã‚„ã€ŒåŸ‹ã‚åˆã‚ã›ã€ã‚’è¨­è¨ˆã™ã‚‹ğŸ«âœ¨
ï¼ˆä¾‹ï¼šç™ºé€å¾Œâ†’è¿”é‡‘ï¼‹ã‚¯ãƒ¼ãƒãƒ³ï¼‹äººæ‰‹å¯¾å¿œï¼‰

## ãƒ«ãƒ¼ãƒ«4ï¼šCompensationã¯ã€Œä½•åº¦å‘¼ã°ã‚Œã¦ã‚‚å£Šã‚Œãªã„ã€ãŒç†æƒ³ğŸ”ğŸ›¡ï¸

åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã¯ã€åŒã˜å‘½ä»¤ãŒ2å›å±Šãã“ã¨ãŒã‚ã‚Šã¾ã™ğŸ˜±
è£œå„Ÿã¯**ãƒªãƒˆãƒ©ã‚¤å¯èƒ½ï¼†å†ªç­‰**ãŒé‡è¦ã€ã¨ã„ã†æ•´ç†ãŒã‚ˆãå‡ºã¦ãã¾ã™ã€‚([Baeldung on Kotlin][4])
ï¼ˆå†ªç­‰æ€§ã¯å¾Œã®ç« ã§ã‚¬ãƒƒãƒ„ãƒªã‚„ã‚‹ã‚ˆğŸ”‘âœ¨ï¼‰

## ãƒ«ãƒ¼ãƒ«5ï¼šã€Œæˆ»ã™é †ç•ªã€ã¯åŸºæœ¬â€œé€†é †â€ğŸ”

æœ€å¾Œã«æˆåŠŸã—ãŸã‚‚ã®ã‹ã‚‰æˆ»ã™ã¨ã€æ•´åˆæ€§ãŒä¿ã¡ã‚„ã™ã„ğŸ’¡
ï¼ˆä¾‹ï¼šåœ¨åº«ç¢ºä¿â†’æ±ºæ¸ˆâ†’æ³¨æ–‡ ã®é †ã§æˆ»ã™ã€ã¿ãŸã„ãªæ„Ÿã˜ï¼‰

---

# 5-6. ã¡ã„ã•ãªæ¼”ç¿’ğŸ“ğŸ’•ã€ŒStep/Comp ãƒšã‚¢ã‚·ãƒ¼ãƒˆã€ã‚’ä½œã‚ã†ï¼

ã‚ãªãŸãŒECã‚µã‚¤ãƒˆæ‹…å½“ã ã¨ã—ã¦ã€æ¬¡ã®3ã¤ã®Stepã‚’è€ƒãˆã¦ã¿ã¦ã­ğŸ‘‡âœ¨

## ãŠé¡Œï¼šã‚®ãƒ•ãƒˆæ³¨æ–‡SagağŸ

* Step Aï¼šã‚®ãƒ•ãƒˆåŒ…è£…ã‚’ä¾é ¼ã™ã‚‹ğŸ€
* Step Bï¼šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ã‚’å°åˆ·ã™ã‚‹ğŸ’Œ
* Step Cï¼šé…é€æ—¥æ™‚ã‚’äºˆç´„ã™ã‚‹â°ğŸšš

### âœ… ã‚„ã‚‹ã“ã¨ï¼ˆã“ã®è¡¨ã‚’åŸ‹ã‚ã¦ã¿ã‚ˆã†ğŸ“ï¼‰

| Step | Stepï¼ˆä½•ã‚’ã™ã‚‹ï¼Ÿï¼‰âœ… | Compensationï¼ˆã©ã†æˆ»ã™ï¼Ÿï¼‰ğŸ§¯ | æˆ»ã›ãªã„å ´åˆã®ä»£æ›¿æ¡ˆğŸ« |
| ---- | ------------ | --------------------- | ------------ |
| A    |              |                       |              |
| B    |              |                       |              |
| C    |              |                       |              |

ğŸ’¡ãƒ’ãƒ³ãƒˆï¼š

* ã€Œå°åˆ·ã€ã¯ç‰©ç†çš„ã«æˆ»ã›ãªã„ã‹ã‚‚â€¦ï¼Ÿãã®ã¨ãä»£æ›¿æ¡ˆã¯ï¼ŸğŸ¤”
* ã€Œäºˆç´„ã€ã¯å–æ¶ˆã§ãã‚‹ï¼Ÿã§ããªã„ï¼Ÿãƒ«ãƒ¼ãƒ«ã‚’ç¢ºèªã™ã‚‹å‰æã§è¨­è¨ˆã—ã¦OKğŸ‘Œ

---

# 5-7. TypeScriptã§â€œStep/Compã®å‹â€ã‚’ä½œã‚‹ğŸ§©ğŸ’»

ã“ã“ã§ã¯ã€Œãƒšã‚¢ã§è€ƒãˆã‚‹ã€ã‚’ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã—ã¾ã™âœ¨
ï¼ˆã¾ã å®Ÿé‹ç”¨ã˜ã‚ƒãªãã¦ã€è€ƒãˆæ–¹ã‚’å›ºå®šã™ã‚‹ãŸã‚ã®ãƒŸãƒ‹å‹ã ã‚ˆğŸ§ ï¼‰

```ts
// Sagaå…¨ä½“ã§å…±æœ‰ã—ãŸã„æœ€ä½é™ã®æƒ…å ±
export type SagaContext = {
  sagaId: string;
  orderId: string;
  // ãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ã„ã‚ˆã†ã«ãƒ­ã‚°ã‚‚æŒã¦ã‚‹ã¨ä¾¿åˆ©âœ¨
  logs: string[];
};

// Step ã¨ Compensation ã‚’å¿…ãšãƒšã‚¢ã§æŒã¤
export type SagaStep = {
  name: string;

  // é †æ–¹å‘ï¼ˆå‰ã«é€²ã‚ã‚‹ï¼‰
  execute: (ctx: SagaContext) => Promise<void>;

  // è£œå„Ÿï¼ˆæˆ»ã™ / æ‰“ã¡æ¶ˆã™ï¼‰
  compensate: (ctx: SagaContext) => Promise<void>;
};
```

## â€œå®Ÿè¡Œâ†’å¤±æ•—ã—ãŸã‚‰é€†é †ã«è£œå„Ÿâ€ã®è¶…ãƒŸãƒ‹å®Ÿè£…ğŸ”ğŸ§¯

```ts
export async function runSaga(steps: SagaStep[], ctx: SagaContext) {
  const executed: SagaStep[] = [];

  try {
    for (const step of steps) {
      ctx.logs.push(`â–¶ï¸ execute: ${step.name}`);
      await step.execute(ctx);
      executed.push(step);
    }

    ctx.logs.push("âœ… Saga completed!");
  } catch (err) {
    ctx.logs.push(`ğŸ’¥ Saga failed: ${(err as Error).message}`);

    // é€†é †ã§è£œå„Ÿã™ã‚‹ğŸ”
    for (const step of executed.reverse()) {
      try {
        ctx.logs.push(`ğŸ§¯ compensate: ${step.name}`);
        await step.compensate(ctx);
      } catch (compErr) {
        ctx.logs.push(
          `ğŸš¨ compensate failed: ${step.name} / ${(compErr as Error).message}`
        );
        // æœ¬ç•ªã¯ã€Œè£œå„Ÿã®å¤±æ•—ã€ã‚’ã©ã†æ‰±ã†ã‹ãŒè¶…é‡è¦ï¼ˆå¾Œã®ç« ã§æ‰±ã†ã‚ˆğŸ“šï¼‰
      }
    }

    throw err;
  }
}
```

ã“ã“ã§å¤§äº‹ãªã®ã¯ã€Œ**Step/Comp ãŒå¿…ãšã‚»ãƒƒãƒˆ**ã€ã«ãªã£ã¦ã„ã‚‹ã“ã¨ğŸ’
ã“ã®å½¢ãŒã‚ã‚‹ã ã‘ã§ã€è¨­è¨ˆã®è¿·å­ãŒã‹ãªã‚Šæ¸›ã‚Šã¾ã™ğŸ§­âœ¨

---

# 5-8. AIæ´»ç”¨ãƒŸãƒ‹ã‚³ãƒ¼ãƒŠãƒ¼ğŸ¤–ğŸ’¡ï¼ˆãƒšã‚¢è¨­è¨ˆãŒé€Ÿããªã‚‹ï¼ï¼‰

## âœ… 1) ãƒšã‚¢è¡¨ã®ãŸãŸãå°ã‚’ä½œã‚‰ã›ã‚‹ğŸ“

* ã€Œæ³¨æ–‡ãƒ•ãƒ­ãƒ¼ï¼ˆæ³¨æ–‡/æ±ºæ¸ˆ/åœ¨åº«/ç™ºé€ï¼‰ã®Stepã¨Compensationã‚’è¡¨ã«ã—ã¦ã€‚æˆ»ã›ãªã„ã‚±ãƒ¼ã‚¹ã®ä»£æ›¿æ¡ˆã‚‚æ·»ãˆã¦ã€
  ã¿ãŸã„ã«é ¼ã‚€ã¨ã€è¡¨ã®ä¸‹æ›¸ããŒä¸€ç¬ã§å‡ºã¾ã™âš¡

## âœ… 2) ã€Œæˆ»ã—æ¼ã‚Œã€ã‚’æŒ‡æ‘˜ã—ã¦ã‚‚ã‚‰ã†ğŸ”

* ã€Œã“ã®Stepä¸€è¦§ã«å¯¾ã—ã¦ã€è£œå„ŸãŒå¼±ã„/ä¸è¶³ã—ã¦ã‚‹ã¨ã“ã‚ã‚’æŒ‡æ‘˜ã—ã¦ã€
  ã§ã€æŠœã‘ãƒã‚§ãƒƒã‚¯ãŒã§ãã¾ã™âœ…âœ¨

## âœ… 3) â€œå¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³â€ã‚’å¢—ã‚„ã™ğŸ˜ˆğŸ§ª

* ã€ŒStep2ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸå ´åˆã®æ‰±ã„ã€
* ã€ŒStep3ãŒæˆåŠŸã—ãŸã®ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ã“ãªã„å ´åˆã€
  ã¿ãŸã„ãªâ€œã‚ã‚ŠãŒã¡äº‹æ•…â€ã‚’ä½œã£ã¦ã‚‚ã‚‰ã†ã¨å¼·ã„ã§ã™ğŸ’ªğŸ”¥

---

# ç« æœ«ãƒã‚§ãƒƒã‚¯âœ…ğŸ“ï¼ˆ3åˆ†ã§OKï¼‰

## Q1ï¸âƒ£ Stepã¨CompensationãŒã€Œãƒšã‚¢ã€ãªç†ç”±ã¯ï¼ŸğŸ¤”

â†’ é€”ä¸­å¤±æ•—ã«å‚™ãˆã¦ã€**æˆåŠŸæ¸ˆã¿ã®å¤‰æ›´ã‚’æ‰“ã¡æ¶ˆã™æ‰‹æ®µ**ãŒå¿…è¦ã ã‹ã‚‰ğŸ§¯

## Q2ï¸âƒ£ è£œå„Ÿã¯ã€Œå®Œå…¨ãªå·»ãæˆ»ã—ã€ã˜ã‚ƒãªã„ã¨ãƒ€ãƒ¡ï¼ŸğŸ™…â€â™€ï¸

â†’ ãƒ€ãƒ¡ã˜ã‚ƒãªã„ï¼ç¾å®Ÿã«åˆã‚ã›ã¦ã€Œè¿”é‡‘ã€ã€Œã‚¯ãƒ¼ãƒãƒ³ã€ã€Œäººæ‰‹å¯¾å¿œã€ãªã©ã‚‚ã‚¢ãƒªğŸ«âœ¨ï¼ˆè£œå„Ÿãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®è€ƒãˆæ–¹ã§ã‚‚é‡è¦ï¼‰([Microsoft Learn][2])

## Q3ï¸âƒ£ å¤±æ•—æ™‚ã«è£œå„Ÿã‚’èµ°ã‚‰ã›ã‚‹é †ç•ªã¯ï¼ŸğŸ”

â†’ åŸºæœ¬ã¯**é€†é †**ï¼ˆæœ€å¾Œã«æˆåŠŸã—ãŸã‚‚ã®ã‹ã‚‰æˆ»ã™ï¼‰ğŸ§ âœ¨

---

# ã¾ã¨ã‚ğŸ“Œâœ¨

* Sagaã®åŸºæœ¬å½¢ã¯ **Stepï¼ˆé †æ–¹å‘ï¼‰ï¼‹Compensationï¼ˆè£œå„Ÿï¼‰** ã®ãƒšã‚¢ğŸ§±ğŸ’
* æˆåŠŸãƒ«ãƒ¼ãƒˆã ã‘ã˜ã‚ƒãªãã€**å¤±æ•—æ™‚ã®æˆ»ã—ãƒ«ãƒ¼ãƒˆ**ã‚’å¿…ãšåŒæ™‚ã«è¨­è¨ˆã™ã‚‹ğŸ§¯
* è£œå„Ÿã¯ã€Œç¾å®Ÿçš„ã«æˆ»ã›ã‚‹å½¢ã€ã§OKã€‚å®Œç’§ãªå·»ãæˆ»ã—ã«ã“ã ã‚ã‚Šã™ããªã„ğŸ™†â€â™€ï¸
* è£œå„Ÿã¯ãƒªãƒˆãƒ©ã‚¤ã‚„é‡è¤‡ã«è€ãˆã‚‹è¨­è¨ˆãŒå¤§äº‹ï¼ˆå†ªç­‰æ€§ã®ä¼ç·šğŸ”‘ï¼‰([Baeldung on Kotlin][4])

[1]: https://learn.microsoft.com/en-us/azure/architecture/patterns/saga?utm_source=chatgpt.com "Saga Design Pattern - Azure Architecture Center"
[2]: https://learn.microsoft.com/en-us/azure/architecture/patterns/compensating-transaction?utm_source=chatgpt.com "Compensating Transaction pattern - Azure"
[3]: https://docs.aws.amazon.com/prescriptive-guidance/latest/cloud-design-patterns/saga.html?utm_source=chatgpt.com "Saga patterns - AWS Prescriptive Guidance"
[4]: https://www.baeldung.com/cs/saga-pattern-microservices?utm_source=chatgpt.com "Saga Pattern in Microservices"
