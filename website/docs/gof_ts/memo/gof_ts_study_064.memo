Commandを関数ペアと履歴配列で定義し、Undo機能を実現する手法です。状態の不変性を保ち、副作用を分離することで、安全かつシンプルな取り消し操作が可能になります。
