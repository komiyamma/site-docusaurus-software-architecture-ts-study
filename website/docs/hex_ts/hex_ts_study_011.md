# ç¬¬11ç« ã€€Windowsï¼‹VS Codeæº–å‚™â‘¡ï¼šVS Codeã®å¿…é ˆè¨­å®š ğŸ§°âœ¨

![hex_ts_study_011[(./picture/hex_ts_study_011_testing_in_isolation.png)

ã“ã®ç« ã¯ã€Œ**VS Codeã®è¨­å®šã‚’â€œæœ€ä½é™ã ã‘â€æ•´ãˆã¦ã€é–‹ç™ºãŒã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã‚€çŠ¶æ…‹ã«ã™ã‚‹**ã€ã®ãŒç›®çš„ã ã‚ˆã€œğŸ˜ŠğŸ’–
ã“ã“ãŒæ•´ã†ã¨ã€ã‚ã¨ã§ä½œã‚‹ Ports & Adapters ã®ã‚³ãƒ¼ãƒ‰ã‚‚ **èª­ã¿ã‚„ã™ã„ãƒ»ç›´ã—ã‚„ã™ã„ãƒ»å£Šã‚Œã«ãã„** ã«è‚²ã¤ğŸŒ±âœ¨

---

### 11-1. è¨­å®šã¯ã©ã“ã«å…¥ã‚Œã‚‹ï¼Ÿï¼ˆUser / Workspace ã®ä½¿ã„åˆ†ã‘ï¼‰ğŸ—‚ï¸âœ¨

VS Codeã®è¨­å®šã«ã¯å¤§ãã2ç¨®é¡ã‚ã‚‹ã‚ˆğŸ‘‡

* **User Settings**ï¼šã‚ãªãŸã®PCå…¨ä½“ã«åŠ¹ãï¼ˆã©ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚å…±é€šï¼‰
* **Workspace Settings**ï¼šãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã‘ã«åŠ¹ãï¼ˆ`.vscode/settings.json` ã«å…¥ã‚‹ï¼‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é…ã‚ŠãŸã„ï¼ˆå…±æœ‰ã—ãŸã„ï¼‰è¨­å®šã¯ Workspace ã«ç½®ãã®ãŒä¾¿åˆ©ã ã‚ˆã€œğŸ“¦âœ¨
ã“ã®åŒºåˆ¥ã‚„é–‹ãæ–¹ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚èª¬æ˜ã•ã‚Œã¦ã‚‹ã‚ˆã€‚([Visual Studio Code][1])

é–‹ãæ–¹ã¯ã“ã®ã¸ã‚“ã‚’è¦šãˆã‚‹ã ã‘ã§OKâœ…

* è¨­å®šç”»é¢ï¼š`Ctrl + ,`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚’é–‹ã‘ã‚‹ï¼‰([Visual Studio Code][1])
* ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆï¼š`Ctrl + Shift + P`ï¼ˆãªã‚“ã§ã‚‚å‘¼ã³å‡ºã›ã‚‹é­”æ³•ã®çª“ï¼‰([Visual Studio Code][1])
* JSONã§ç›´æ¥ã„ã˜ã‚‹ï¼š`Preferences: Open User Settings (JSON)` / `Preferences: Open Workspace Settings (JSON)`([Visual Studio Code][1])

ã‚ã¨ä¾¿åˆ©ãªã®ãŒã“ã‚ŒğŸ‘‡

* **Default Settingsï¼ˆæ—¢å®šå€¤ï¼‰ã‚’ä¸¸ã”ã¨èª­ã‚€**ï¼š`Preferences: Open Default Settings (JSON)`
  â†’ `defaultSettings.json` ãŒé–‹ãã‚ˆï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰([Visual Studio Code][2])

> ã€Œã“ã®è¨­å®šã£ã¦ä½•ãŒå…¥ã£ã¦ã‚‹ã®ï¼Ÿã€ã£ã¦è¿·ã£ãŸã‚‰ã€ã¾ãš Default Settings ã‚’è¦‹ã«è¡Œã‘ã°ã ã„ãŸã„è§£æ±ºã™ã‚‹ã‚ˆğŸ˜ŠğŸ”âœ¨ ([Visual Studio Code][2])

---

### 11-2. ä¿å­˜æ™‚æ•´å½¢ï¼ˆFormat on Saveï¼‰ã‚’ONã«ã™ã‚‹ âœ¨ğŸ§¼

æ•´å½¢ã¯â€œäººã®æ‰‹â€ã˜ã‚ƒãªãã¦â€œæ©Ÿæ¢°â€ã«ä»»ã›ã‚‹ã®ãŒã„ã¡ã°ã‚“ãƒ©ã‚¯ï¼ğŸ¤–ğŸ’–
VS Codeã¯ **ä¿å­˜æ™‚ã«è‡ªå‹•æ•´å½¢**ã§ãã‚‹ã‚ˆã€‚

* `editor.formatOnSave`ï¼šä¿å­˜ã—ãŸã¨ãã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•´å½¢ã™ã‚‹ ([Visual Studio Code][3])

è¨­å®šã¯ã“ã‚“ãªæ„Ÿã˜ğŸ‘‡ï¼ˆWorkspace ã«å…¥ã‚Œã‚‹ã®ãŒãŠã™ã™ã‚ï¼‰

```json
{
  "editor.formatOnSave": true
}
```

VS Codeã¯ JavaScript / TypeScript ãªã©ã« **æ¨™æº–ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼**ã‚‚æŒã£ã¦ã‚‹ã‹ã‚‰ã€ã¾ãšã¯ã“ã‚Œã ã‘ã§ã‚‚ä½“æ„Ÿã§ãã‚‹ã‚ˆâœ¨ ([Visual Studio Code][3])

#### ğŸ’¡ã€Œä¿å­˜ã—ãŸã®ã«æ•´å½¢ã•ã‚Œãªã„ï¼ã€ã¨ãã®ã‚ã‚‹ã‚ã‚‹

* ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ãŒè¤‡æ•°ã‚ã‚‹ã¨ã€ã©ã‚Œä½¿ã†ã‹è¿·ã£ã¦æ­¢ã¾ã‚‹ã“ã¨ãŒã‚ã‚‹
  â†’ `editor.defaultFormatter` ã‚’æ±ºã‚ã‚‹ã¨å®‰å®šã—ã‚„ã™ã„ï¼ˆã‚ã¨ã§Prettierã‚’å…¥ã‚Œã‚‹ãªã‚‰ãªãŠã•ã‚‰ï¼‰ğŸ˜Šâœ¨

---

### 11-3. è‡ªå‹•importï¼†importæ•´ç†ï¼ˆã‚³ãƒ¼ãƒ‰ã®è¦‹ãŸç›®ãŒä¸€æ°—ã«ç¶ºéº—ï¼‰ğŸ§¹ğŸ”

#### â‘  ä¿å­˜æ™‚ã« import ã‚’æ•´ç†ã™ã‚‹ï¼ˆOrganize Importsï¼‰ğŸ“¦âœ¨

VS Codeã¯ã€Œä¿å­˜ã—ãŸç¬é–“ã« import ã‚’æ•´ãˆã‚‹ã€ã‚‚ã§ãã‚‹ã‚ˆï¼

`editor.codeActionsOnSave` ã§ã€ä¿å­˜æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã§ãã‚‹ğŸ˜Š
ã—ã‹ã‚‚æœ€è¿‘ã®VS Codeã¯ **true/false ã˜ã‚ƒãªãã¦**ã€`explicit / always / never` ã¿ãŸã„ãªæŒ‡å®šã‚‚ã§ãã‚‹ã‚ˆï¼ˆã‘ã£ã“ã†å¤§äº‹ï¼‰([Visual Studio Code][4])

* `explicit`ï¼šè‡ªåˆ†ã§ä¿å­˜ã—ãŸã¨ãã ã‘ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰([Visual Studio Code][4])
* `always`ï¼šè‡ªå‹•ä¿å­˜ã§ã‚‚èµ°ã‚‹([Visual Studio Code][4])
* `never`ï¼šèµ°ã‚‰ãªã„([Visual Studio Code][4])

ã¾ãšã¯å®‰å…¨ã« **explicit** ãŒè¶…ãŠã™ã™ã‚ğŸ™†â€â™€ï¸âœ¨ï¼ˆå‹æ‰‹ã«æš´ã‚Œã«ãã„ï¼‰

```json
{
  "editor.codeActionsOnSave": {
    "source.organizeImports": "explicit"
  }
}
```

> ã“ã‚Œã§ã€ä½¿ã£ã¦ãªã„importæ¶ˆãˆãŸã‚Šã€é †ç•ªæ•´ã£ãŸã‚Šã—ã¦æ°—æŒã¡ã„ã„ã€œã€œğŸ¥°ğŸ§¹âœ¨

#### â‘¡ ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ãƒ»ãƒªãƒãƒ¼ãƒ ã§ import ãƒ‘ã‚¹ã‚‚è¿½å¾“ã•ã›ã‚‹ ğŸ§³â¡ï¸

åœ°å‘³ã«ç¥ãªã®ãŒã“ã‚Œï¼ï¼
ãƒ•ã‚¡ã‚¤ãƒ«åå¤‰ãˆãŸã¨ãã€importãŒå£Šã‚Œã‚‹äº‹æ•…ã‚’æ¸›ã‚‰ã›ã‚‹ğŸ˜Š

* `typescript.updateImportsOnFileMove.enabled`ï¼š`prompt / always / never` ([Visual Studio Code][4])

ãŠã™ã™ã‚ã¯ **prompt** ã‹ **always**ï¼ˆè¿·ã£ãŸã‚‰ promptï¼‰âœ¨

```json
{
  "typescript.updateImportsOnFileMove.enabled": "prompt"
}
```

---

### 11-4. æ¤œç´¢ã‚’â€œå¼·ãã™ã‚‹â€è¨­å®šï¼ˆå¤§è¦æ¨¡ã§ã‚‚è¿·å­ã«ãªã‚‰ãªã„ï¼‰ğŸ”ğŸ§­âœ¨

VS Codeã®æ¤œç´¢ã¯è¶…å¼·ã„ã‚“ã ã‘ã©ã€`node_modules` ã¨ã‹ `dist` ã¨ã‹ãŒæ··ã–ã‚‹ã¨
**æ¤œç´¢ãŒé‡ã„ï¼†ãƒã‚¤ã‚ºã ã‚‰ã‘**ã«ãªã‚ŠãŒã¡ğŸ˜µâ€ğŸ’«

å…¬å¼ã‚‚ã€Œé‡ã„ãªã‚‰é™¤å¤–ã—ã‚ˆã€œã€ã£ã¦è¨€ã£ã¦ã‚‹ã‚ˆğŸ“Œ
`files.exclude` / `search.exclude` ã§ãƒ•ã‚©ãƒ«ãƒ€é™¤å¤–ã§ãã‚‹([Visual Studio Code][3])

#### â‘  ã¾ãšé™¤å¤–ã®åŸºæœ¬ï¼ˆè¶…å®šç•ªï¼‰ğŸ“ğŸš«

```json
{
  "files.exclude": {
    "**/node_modules": true,
    "**/dist": true
  },
  "search.exclude": {
    "**/node_modules": true,
    "**/dist": true
  }
}
```

#### â‘¡ æ¤œç´¢UIã®å°ãƒ¯ã‚¶ï¼ˆè¦šãˆã‚‹ã¨é€Ÿã„ï¼‰âš¡

* å…¨æ–‡æ¤œç´¢ï¼š`Ctrl + Shift + F`
* è©³ç´°æ¤œç´¢ï¼ˆinclude / excludeæ¬„ã‚’å‡ºã™ï¼‰ï¼šæ¤œç´¢æ¬„ã®ã€Œâ€¦ã€ã‹ `Ctrl + Shift + J`([Visual Studio Code][3])
* ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ **ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã¯ forward slashï¼ˆ`/`ï¼‰** ã§æ›¸ãã®ãŒåŸºæœ¬ï¼ˆWindowsã§ã‚‚ï¼‰([Visual Studio Code][3])
* globãƒ‘ã‚¿ãƒ¼ãƒ³ã®è€ƒãˆæ–¹ã¯ã“ã‚Œï¼ˆå…¬å¼ï¼‰([Visual Studio Code][5])

---

### 11-5. ã‚ˆãã‚ã‚‹è©°ã¾ã‚Šâ‘ ï¼šæ”¹è¡Œã‚³ãƒ¼ãƒ‰ï¼ˆCRLF/LFï¼‰ğŸ§·ğŸ’¥

Windowsã ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ˆã£ã¦ `CRLF` ã¨ `LF` ãŒæ··ã–ã£ã¦
ã€Œãªã‚“ã‹å·®åˆ†ã ã‚‰ã‘ğŸ˜±ã€ã£ã¦ãªã‚ŠãŒã¡ã€‚

VS Codeã«ã¯ `files.eol` ã£ã¦è¨­å®šãŒã‚ã£ã¦ã€**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®æ”¹è¡Œ**ã‚’æ±ºã‚ã‚‰ã‚Œã‚‹ã‚ˆã€‚
ãŸã ã—æ³¨æ„âš ï¸ï¼š

* `files.eol` ã¯ **æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«å‘ã‘**
* æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯ **ä»Šã®æ”¹è¡ŒãŒä¿æŒã•ã‚Œã‚‹**
* æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰ãˆãŸã„ã¨ãã¯ **Change End Of Line Sequence** ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã† ([Visual Studio Code][6])

ãŸã¨ãˆã° TypeScript ç³»ã¯ LF ã«ã—ãŸã„ãªã‚‰ğŸ‘‡

```json
{
  "[typescript]": { "files.eol": "\n" },
  "[typescriptreact]": { "files.eol": "\n" }
}
```

> ã€Œãˆã€LFã«ã—ãŸã ã‘ã§Gitã®å·®åˆ†ãŒã„ã£ã±ã„â€¦ã€ã£ã¦ãªã‚‹ã®ã¯æ™®é€šã ã‚ˆğŸ¥¹
> æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã®ä¸€éƒ¨ã ã‹ã‚‰ã€å¤‰ãˆãŸã‚‰å·®åˆ†ã«ãªã‚‹ã®ã¯è‡ªç„¶ãªå‹•ãï¼

---

### 11-6. ã‚ˆãã‚ã‚‹è©°ã¾ã‚Šâ‘¡ï¼šè¨­å®šãŒå¢—ãˆã™ãã¦è¿·å­ğŸ˜µâ€ğŸ’«ğŸŒ€

ãã‚“ãªã¨ãã¯ â€œè¨­å®šã®è¾æ›¸â€ ã‚’ä½¿ãˆã°OKâœ¨

* `Preferences: Open Default Settings (JSON)` ã§æ—¢å®šå€¤ã‚’èª­ã‚€
  â†’ `defaultSettings.json` ãŒé–‹ãã‚ˆ([Visual Studio Code][2])

ã€Œã“ã®è¨­å®šã£ã¦ä½•ã®ãŸã‚ï¼Ÿã€ã£ã¦ãªã£ãŸã‚‰ã€ã¾ãšã“ã“ã‚’è¦‹ã‚‹ã¨å®‰å¿ƒğŸ˜ŠğŸ“–âœ¨

---

## 11-7. ãƒŸãƒ‹æ¼”ç¿’ï¼ˆ5åˆ†ã§â€œåŠ¹ã„ã¦ã‚‹æ„Ÿâ€ã‚’ä½“é¨“ï¼‰â±ï¸ğŸ€

### æ¼”ç¿’Aï¼šä¿å­˜æ™‚æ•´å½¢ãŒåŠ¹ãã‹ç¢ºèªğŸ§¼âœ¨

1. é©å½“ãª `.ts` ã‚’é–‹ã
2. ã‚ã–ã¨ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’å´©ã™ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ãã¡ã‚ƒãã¡ã‚ƒã«ã™ã‚‹ï¼‰ğŸ˜ˆ
3. ä¿å­˜ï¼ˆ`Ctrl + S`ï¼‰
4. æ•´å½¢ã•ã‚ŒãŸã‚‰æˆåŠŸğŸ‰ï¼ˆFormat on Save ã°ã‚“ã–ã„ğŸ™Œï¼‰

â€»æ‰‹å‹•æ•´å½¢ã¯ `Shift + Alt + F`ï¼ˆå…¬å¼ã®æ“ä½œèª¬æ˜ã«ã‚‚ã‚ã‚‹ã‚ˆï¼‰([Visual Studio Code][3])

### æ¼”ç¿’Bï¼šimportæ•´ç†ãŒåŠ¹ãã‹ç¢ºèªğŸ“¦âœ¨

1. ä½¿ã£ã¦ãªã„ import ã‚’1å€‹ä½œã‚‹
2. ä¿å­˜
3. æ¶ˆãˆãŸã‚Šä¸¦ã³æ›¿ãˆã•ã‚ŒãŸã‚‰æˆåŠŸğŸ‰ï¼ˆOrganize Importsã€œï¼ï¼‰

### æ¼”ç¿’Cï¼šæ¤œç´¢é™¤å¤–ãŒåŠ¹ãã‹ç¢ºèªğŸ”ğŸš«

1. `Ctrl + Shift + F` ã§æ¤œç´¢
2. `node_modules` ãŒæ¤œç´¢ã«å‡ºã¦ã“ãªã„ï¼ˆor ã‹ãªã‚Šæ¸›ã‚‹ï¼‰ãªã‚‰OKğŸ˜Šâœ¨

---

## ã“ã®ç« ã®ã¾ã¨ã‚ ğŸğŸ’–

* è¨­å®šã¯ **User / Workspace** ãŒã‚ã‚‹ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±æœ‰ã¯WorkspaceãŒä¾¿åˆ©ï¼‰([Visual Studio Code][1])
* **ä¿å­˜æ™‚æ•´å½¢**ã¯ `editor.formatOnSave` ãŒåŸºæœ¬([Visual Studio Code][3])
* **ä¿å­˜æ™‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**ã¯ `editor.codeActionsOnSave`ï¼ˆ`explicit/always/never` ãŒä½¿ãˆã‚‹ï¼‰([Visual Studio Code][4])
* **ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•ã§importè¿½å¾“**ã¯ `typescript.updateImportsOnFileMove.enabled`([Visual Studio Code][4])
* **é™¤å¤–è¨­å®š**ã§æ¤œç´¢ã¨è£œå®ŒãŒè»½ããªã‚‹ï¼ˆå…¬å¼ã‚‚æ¨å¥¨ï¼‰([Visual Studio Code][7])
* æ”¹è¡Œã‚³ãƒ¼ãƒ‰ã¯ `files.eol`ï¼ˆæ–°è¦å‘ã‘ï¼‰ï¼‹æ—¢å­˜ã¯ã‚³ãƒãƒ³ãƒ‰ã§å¤‰æ›´([Visual Studio Code][6])

---

æ¬¡ã®ç« ï¼ˆç¬¬12ç« ï¼‰ã§ã¯ã€ã“ã“ã§æ•´ãˆãŸVS Codeã‚’â€œAIè¾¼ã¿â€ã§ã•ã‚‰ã«ä½¿ã„ã‚„ã™ãã—ã¦ã„ãã‚ˆã€œğŸ¤–ğŸ’–
ï¼ˆé››å½¢ä½œã‚Šã‚„å‘½åç›¸è«‡ã®ã‚³ãƒ„ã¨ã‹ã€ã‚„ã‚Šã™ãæ³¨æ„ãƒã‚¤ãƒ³ãƒˆã‚‚ğŸ«¶âœ¨ï¼‰

[1]: https://code.visualstudio.com/docs/configure/settings "User and workspace settings"
[2]: https://code.visualstudio.com/docs/reference/default-settings "Default settings reference"
[3]: https://code.visualstudio.com/docs/editing/codebasics "Basic editing"
[4]: https://code.visualstudio.com/docs/typescript/typescript-refactoring "Refactoring TypeScript"
[5]: https://code.visualstudio.com/docs/editor/glob-patterns "Glob Patterns Reference"
[6]: https://code.visualstudio.com/updates/v1_40 "October 2019 (version 1.40)"
[7]: https://code.visualstudio.com/docs/editing/intellisense "IntelliSense"
