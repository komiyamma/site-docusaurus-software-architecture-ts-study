責務が混在したコードの分解手順。色分けによる可視化から始め、最小のPort定義、Adapterへの移動、テストによる保護という段階的なリファクタリングを解説。