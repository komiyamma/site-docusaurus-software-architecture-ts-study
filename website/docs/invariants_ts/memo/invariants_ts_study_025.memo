第25章は状態による不変条件を学ぶ。タグ付きユニオンで状態を型分けし、状態に応じた操作の許可・禁止を型で強制し、安全な遷移を実現する手法を解説する。