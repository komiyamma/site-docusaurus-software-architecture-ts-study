# 9ç« ï¼šä¸å¤‰æ¡ä»¶ï¼ˆInvariantsï¼‰è¶…å…¥é–€ğŸ§·ğŸ›¡ï¸

## ã“ã®ç« ã§ã‚ã‹ã‚‹ã“ã¨ğŸ¯âœ¨

* **ä¸å¤‰æ¡ä»¶**ã£ã¦ãªã«ï¼Ÿï¼ˆï¼ã©ã‚“ãªã¨ãã‚‚çµ¶å¯¾ã«å®ˆã‚‹ãƒ«ãƒ¼ãƒ«ï¼‰ğŸ§·
* ãã®ãƒ«ãƒ¼ãƒ«ã‚’ **ã©ã“ã«ç½®ãã¨äº‹æ•…ã‚‰ãªã„ã‹**ï¼ˆæ•£ã‚‰ã•ãªã„ï¼ï¼‰ğŸ§©
* ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã§ã® **ã€ŒCommand â†’ ãƒ«ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯ â†’ Eventã€** ã®å½¢ğŸ§ ğŸ“®
* ä¸å¤‰æ¡ä»¶ã‹ã‚‰ **ãƒ†ã‚¹ãƒˆè¦³ç‚¹**ã‚’ä½œã‚‹ã‚³ãƒ„ğŸ§ªğŸ‘€

---

## ä¸å¤‰æ¡ä»¶ã£ã¦ãªã«ï¼ŸğŸ§·

ä¸å¤‰æ¡ä»¶ï¼ˆInvariantsï¼‰ã¯ã€ã–ã£ãã‚Šè¨€ã†ã¨ã“ã†ğŸ‘‡

* ã€Œã‚¢ãƒ—ãƒªã®ä¸–ç•Œã§ã€**çµ¶å¯¾ã«æˆç«‹ã—ã¦ã¦ã»ã—ã„çŠ¶æ…‹**ã€
* ã€Œã“ã‚ŒãŒå£Šã‚Œã¦ãŸã‚‰ã€ãƒ‡ãƒ¼ã‚¿ã‚‚ç”»é¢ã‚‚å…¨éƒ¨ä¿¡ç”¨ã§ããªã„ğŸ˜±ã€

ãŸã¨ãˆã°ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆãªã‚‰

* åˆè¨ˆé‡‘é¡ã¯ãƒã‚¤ãƒŠã‚¹ã«ãªã‚‰ãªã„ğŸ’°ğŸš«
* æ³¨æ–‡ç¢ºå®šã—ãŸã‚«ãƒ¼ãƒˆã¯ã€ã‚‚ã†ä¸­èº«ã‚’å¤‰ãˆã‚‰ã‚Œãªã„ğŸ“¦ğŸ”’
* æ•°é‡ã¯ 1 ä»¥ä¸ŠğŸ§®âœ…

ã¿ãŸã„ãªã‚„ã¤ï¼

---

## è¶…å¤§äº‹ãƒã‚¤ãƒ³ãƒˆï¼šå‹ã¯â€œå®ˆã£ã¦ãã‚Œã‚‹ã‘ã©â€ã€ç¾å®Ÿã¯å‹ã ã‘ã˜ã‚ƒå®ˆã‚Œãªã„ğŸ˜‡ğŸŒ€

TypeScript ã®å‹ã¯è¶…ä¾¿åˆ©ã ã‘ã©ã€**å®Ÿè¡Œæ™‚ã®ç¾å®Ÿ**ã¯ã“ã†ğŸ‘‡

* APIã‚„ç”»é¢ã‹ã‚‰æ¥ã‚‹å€¤ã¯ã€**é–“é•ã£ã¦ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹**ï¼ˆç©ºã€ãƒã‚¤ãƒŠã‚¹ã€å¤‰ãªæ–‡å­—åˆ—â€¦ï¼‰ğŸ˜µâ€ğŸ’«
* å‹ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®åŠ©ã‘ã§ã‚ã£ã¦ã€**å®Ÿè¡Œæ™‚ã®ãƒ‡ãƒ¼ã‚¿ã®æ­£ã—ã•ã¯åˆ¥å•é¡Œ**ğŸ§ ğŸ’¥

ã ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã§ã¯ç‰¹ã«ã€
**ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆãƒ«ãƒ¼ãƒ«ã®ä¸­å¿ƒï¼‰ã§ä¸å¤‰æ¡ä»¶ã‚’ã‚¬ãƒã§å®ˆã‚‹**ã®ãŒè¶…é‡è¦ã«ãªã‚‹ã‚ˆğŸ›¡ï¸âœ¨

å¤–ã‹ã‚‰æ¥ã‚‹å…¥åŠ›ã®â€œå½¢â€ã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã„æ™‚ã¯ã€Zodã¿ãŸã„ãª **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**ã‚‚ã‚ˆãä½¿ã‚ã‚Œã‚‹ã‚ˆï¼ˆã‚¹ã‚­ãƒ¼ãƒã§æ¤œè¨¼ã—ã¦ã€å®‰å…¨ãªå€¤ã«ã™ã‚‹ï¼‰ğŸ§¾âœ… ([Zod][1])

---

## ä¸å¤‰æ¡ä»¶ã‚’ã€Œæ•£ã‚‰ã™ã€ã¨èµ·ãã‚‹åœ°ç„ğŸ˜‡ğŸ”¥

## ã‚ã‚ŠãŒã¡ãªäº‹æ•…ãƒ‘ã‚¿ãƒ¼ãƒ³ğŸ™…â€â™€ï¸

1. **ç”»é¢ã§ãƒã‚§ãƒƒã‚¯**ã—ã¦ã‚‹ã‘ã©ã€APIç›´å©ãã§çªç ´ã•ã‚Œã‚‹ğŸ“²ğŸ’¥
2. **APIã§ãƒã‚§ãƒƒã‚¯**ã—ã¦ã‚‹ã‘ã©ã€ãƒãƒƒãƒå‡¦ç†ãŒçªç ´ã™ã‚‹ğŸ§¹ğŸ’¥
3. **DBåˆ¶ç´„ã ã‘**ã«é ¼ã£ã¦ã€ã‚¨ãƒ©ãƒ¼ãŒæ„å‘³ä¸æ˜ï¼†ã‚¤ãƒ™ãƒ³ãƒˆãŒä¸­é€”åŠç«¯ğŸ—„ï¸ğŸ˜µ
4. åŒã˜ãƒ«ãƒ¼ãƒ«ãŒã‚ã¡ã“ã¡ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã€ç‰‡æ–¹ã ã‘æ›´æ–°æ¼ã‚ŒğŸ˜‡ğŸ“Œ

---

## ã˜ã‚ƒã‚ã€ã©ã“ã«ç½®ãã®ï¼Ÿç­”ãˆï¼šé›†ç´„ã®å…¥å£ğŸšªğŸ§©

![é›†ç´„ã®å…¥å£ï¼šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä¸å¤‰æ¡ä»¶ï¼‰ã®é–€](./picture/es_ts_study_009_door.png)

ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã®åŸºæœ¬ã®å½¢ï¼ˆã“ã®ç« ã¯â€œæ¦‚å¿µã®èŠ¯â€ã ã‘æŠ¼ã•ãˆã‚‹ã‚ˆï¼‰ğŸ‘‡

* Commandï¼ˆã‚„ã‚ŠãŸã„ã“ã¨ï¼‰ğŸ“®
* **é›†ç´„ï¼ˆAggregateï¼‰ã®å…¥å£ã§ä¸å¤‰æ¡ä»¶ãƒã‚§ãƒƒã‚¯**ğŸ›¡ï¸
* OKãªã‚‰ Eventï¼ˆèµ·ããŸã“ã¨ï¼‰ã‚’ä½œã‚‹ğŸ“œ
* Event ã‚’ç©ã‚€ï¼ˆä¿å­˜ï¼‰ğŸ“¦

ãƒã‚¤ãƒ³ãƒˆã¯ã“ã‚ŒğŸ‘‡
âœ… **ä¸å¤‰æ¡ä»¶ãƒã‚§ãƒƒã‚¯ã¯ã€ŒEventã‚’ä½œã‚‹å‰ã€**
âœ… **EventãŒä¿å­˜ã•ã‚ŒãŸã‚‰ã€ãã®æ™‚ç‚¹ã§â€œãƒ«ãƒ¼ãƒ«ã‚’å®ˆã£ãŸäº‹å®Ÿâ€ã«ãªã‚‹**

```mermaid
flowchart LR
    Cmd[Command] --> Check{ä¸å¤‰æ¡ä»¶ãƒã‚§ãƒƒã‚¯}
    Check -- "NG" --> Err[Error / æ‹’å¦]
    Check -- "OK" --> Event[Eventç”Ÿæˆ]
    Event --> Store[(Event Store)]
```

---

## ä¾‹é¡Œãƒ‰ãƒ¡ã‚¤ãƒ³ï¼šã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆğŸ›’ğŸ

## ã¾ãšã€Œä¸å¤‰æ¡ä»¶ã€ã‚’è‡ªç„¶è¨€èªã§3ã¤æ›¸ãğŸ“âœ¨

ä¾‹ï¼ˆè§£ç­”ä¾‹ã§ã‚‚ã‚ã‚‹ã‚ˆï¼‰ğŸ‘‡

1. **æ•°é‡ã¯ 1 ä»¥ä¸Š**ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ğŸ§®âœ…
2. **å­˜åœ¨ã—ãªã„å•†å“ã¯å¤‰æ›´ã§ããªã„**ğŸš«
3. **Checkout å¾Œã¯å¤‰æ›´ç¦æ­¢**ğŸ”’ğŸ“¦

ã“ã‚ŒãŒã“ã®ç« ã®â€œèŠ¯â€ã ã‚ˆğŸ§·

---

## å®Ÿè£…ã—ã¦ã¿ã‚ˆã†ï¼šä¸å¤‰æ¡ä»¶ã‚’1ã‹æ‰€ã«é›†ã‚ã‚‹ğŸ§©ğŸ›¡ï¸

## 1) Event ã¨ State ã‚’è¶…ãƒŸãƒ‹ãƒãƒ ã§ç”¨æ„ğŸ“¦

ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆã¯ã€Œèµ·ããŸã“ã¨ã€ã ã‘ã‚’æ›¸ãã®ãŒåŸºæœ¬ã ã‚ˆğŸ“œï¼‰

```ts
type CartEvent =
  | { type: "CartCreated"; cartId: string }
  | { type: "ItemAdded"; productId: string; qty: number }
  | { type: "ItemQtyChanged"; productId: string; qty: number }
  | { type: "ItemRemoved"; productId: string }
  | { type: "CheckedOut" };

type CartState = {
  cartId: string | null;
  items: Map<string, number>; // productId -> qty
  checkedOut: boolean;
};

const emptyCartState = (): CartState => ({
  cartId: null,
  items: new Map(),
  checkedOut: false,
});
```

---

## 2) Applyï¼šã‚¤ãƒ™ãƒ³ãƒˆã‹ã‚‰çŠ¶æ…‹ã‚’ä½œã‚‹ğŸ”ğŸ§ 

Applyã¯ã€Œã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã¦çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã ã‘ã€âœ¨
ã“ã“ã«ãƒ«ãƒ¼ãƒ«ã‚’æ··ãœãªã„ã®ãŒã‚³ãƒ„ï¼ï¼ˆæ··ãœã‚‹ã¨ãã¡ã‚ƒãã¡ã‚ƒã«ãªã‚Šã‚„ã™ã„ï¼‰ğŸ˜µâ€ğŸ’«

```ts
function apply(state: CartState, event: CartEvent): CartState {
  switch (event.type) {
    case "CartCreated":
      return { ...state, cartId: event.cartId };

    case "ItemAdded": {
      const next = new Map(state.items);
      const current = next.get(event.productId) ?? 0;
      next.set(event.productId, current + event.qty);
      return { ...state, items: next };
    }

    case "ItemQtyChanged": {
      const next = new Map(state.items);
      next.set(event.productId, event.qty);
      return { ...state, items: next };
    }

    case "ItemRemoved": {
      const next = new Map(state.items);
      next.delete(event.productId);
      return { ...state, items: next };
    }

    case "CheckedOut":
      return { ...state, checkedOut: true };
  }
}
```

---

## 3) Decideï¼šã“ã“ãŒã€Œä¸å¤‰æ¡ä»¶ã®æœ¬ä¸¸ã€ğŸ›¡ï¸ğŸ”¥

Decideã¯ã€Œã‚³ãƒãƒ³ãƒ‰ã‚’å—ã‘ã¦ã€**æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œã‚‹**ã€å ´æ‰€ï¼
ã¤ã¾ã‚Š **ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œã‚‹å‰ã«ã€ã“ã“ã§ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‹**ğŸ’ªâœ¨

```ts
type AddItemCommand = { type: "AddItem"; productId: string; qty: number };
type ChangeQtyCommand = { type: "ChangeQty"; productId: string; qty: number };
type RemoveItemCommand = { type: "RemoveItem"; productId: string };
type CheckoutCommand = { type: "Checkout" };

type CartCommand = AddItemCommand | ChangeQtyCommand | RemoveItemCommand | CheckoutCommand;

type DomainError =
  | { type: "AlreadyCheckedOut" }
  | { type: "InvalidQty"; message: string }
  | { type: "ItemNotFound" }
  | { type: "CartIsEmpty" };

type Result<T> = { ok: true; value: T } | { ok: false; error: DomainError };

function decide(state: CartState, cmd: CartCommand): Result<CartEvent[]> {
  // ä¸å¤‰æ¡ä»¶â‘ ï¼šCheckoutå¾Œã¯å¤‰æ›´ç¦æ­¢ ğŸ”’
  if (state.checkedOut) {
    return { ok: false, error: { type: "AlreadyCheckedOut" } };
  }

  switch (cmd.type) {
    case "AddItem": {
      // ä¸å¤‰æ¡ä»¶â‘¡ï¼šæ•°é‡ã¯ 1ä»¥ä¸Š ğŸ§®âœ…
      if (!Number.isInteger(cmd.qty) || cmd.qty < 1) {
        return {
          ok: false,
          error: { type: "InvalidQty", message: "qty must be an integer >= 1" },
        };
      }
      return { ok: true, value: [{ type: "ItemAdded", productId: cmd.productId, qty: cmd.qty }] };
    }

    case "ChangeQty": {
      // ä¸å¤‰æ¡ä»¶â‘¡ï¼šæ•°é‡ã¯ 1ä»¥ä¸Š ğŸ§®âœ…
      if (!Number.isInteger(cmd.qty) || cmd.qty < 1) {
        return {
          ok: false,
          error: { type: "InvalidQty", message: "qty must be an integer >= 1" },
        };
      }
      // ä¸å¤‰æ¡ä»¶â‘¢ï¼šå­˜åœ¨ã—ãªã„å•†å“ã¯å¤‰æ›´ã§ããªã„ ğŸš«
      if (!state.items.has(cmd.productId)) {
        return { ok: false, error: { type: "ItemNotFound" } };
      }
      return { ok: true, value: [{ type: "ItemQtyChanged", productId: cmd.productId, qty: cmd.qty }] };
    }

    case "RemoveItem": {
      // ä¸å¤‰æ¡ä»¶â‘¢ï¼šå­˜åœ¨ã—ãªã„å•†å“ã¯å‰Šé™¤ã§ããªã„ ğŸš«
      if (!state.items.has(cmd.productId)) {
        return { ok: false, error: { type: "ItemNotFound" } };
      }
      return { ok: true, value: [{ type: "ItemRemoved", productId: cmd.productId }] };
    }

    case "Checkout": {
      // ä¸å¤‰æ¡ä»¶â‘£ï¼šç©ºã‚«ãƒ¼ãƒˆã¯æ³¨æ–‡ã§ããªã„ ğŸ›’ğŸš«
      if (state.items.size === 0) {
        return { ok: false, error: { type: "CartIsEmpty" } };
      }
      return { ok: true, value: [{ type: "CheckedOut" }] };
    }
  }
}
```

ğŸ’¡ã“ã“ã§ã®æ°—æŒã¡ã‚ˆã•ãƒã‚¤ãƒ³ãƒˆğŸ˜

* ãƒ«ãƒ¼ãƒ«ãŒ **Decideã«é›†ã¾ã£ã¦ã‚‹** ï¼æ¢ã—ã‚„ã™ã„ğŸ”âœ¨
* Applyã¯ãŸã ã®çŠ¶æ…‹æ›´æ–° ï¼ã‚·ãƒ³ãƒ—ãƒ«ğŸ˜º
* ã€Œã‚¤ãƒ™ãƒ³ãƒˆãŒä½œã‚ŒãŸï¼ãƒ«ãƒ¼ãƒ«ã‚’å®ˆã£ãŸã€ã«ãªã‚‹ğŸ›¡ï¸ğŸ“œ

---

## ã¡ã‚‡ã„è£œè¶³ï¼šå…¥åŠ›ãƒã‚§ãƒƒã‚¯ã¨ä¸å¤‰æ¡ä»¶ã¯åˆ¥ãƒ¢ãƒğŸ§¾ğŸ§·

* **å…¥åŠ›ãƒã‚§ãƒƒã‚¯**ï¼šå‹ã‚„å½¢å¼ï¼ˆç©ºæ–‡å­—ã€æ•°å€¤ã‹ã€ãªã©ï¼‰ğŸ§¾
* **ä¸å¤‰æ¡ä»¶**ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ«ãƒ¼ãƒ«ï¼ˆCheckoutå¾ŒNGã€åœ¨åº«ã‚„ä¸Šé™ã€æ•´åˆæ€§ï¼‰ğŸ§·

å¤–éƒ¨å…¥åŠ›ã®å½¢ã‚’å®‰å…¨ã«ã™ã‚‹ã«ã¯ã€Zodã¿ãŸã„ãªã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼ã‚‚ã‚ˆãä½¿ã†ã‚ˆâœ… ([Zod][1])

---

## ä¸å¤‰æ¡ä»¶ â†’ ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã«å¤‰æ›ã™ã‚‹ã‚³ãƒ„ğŸ§ªğŸ‘€

ä¸å¤‰æ¡ä»¶ã¯ãƒ†ã‚¹ãƒˆã«ã—ã‚„ã™ã„ï¼âœ¨
ã‚„ã‚Šæ–¹ã¯è¶…å˜ç´”ğŸ‘‡

1. ãƒ«ãƒ¼ãƒ«ã‚’1è¡Œã§æ›¸ãğŸ“
2. **OKã‚±ãƒ¼ã‚¹**ã‚’1ã¤ä½œã‚‹âœ…
3. **NGã‚±ãƒ¼ã‚¹**ã‚’1ã¤ä½œã‚‹ğŸš«
4. NGã®ã¨ãã€**ã©ã®ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‹**ã‚’è¦‹ã‚‹ğŸ‘€

ä¾‹ï¼šã€Œæ•°é‡ã¯ 1 ä»¥ä¸Šã€ğŸ§®âœ…

* OKï¼šqty=1 âœ…
* NGï¼šqty=0 ğŸš« â†’ InvalidQty

---

## ãƒŸãƒ‹æ¼”ç¿’ 1ï¼šä¸å¤‰æ¡ä»¶ã‚’3ã¤æ›¸ã“ã†ğŸ“ğŸ’–

æ¬¡ã®çŠ¶æ³ã‚’æƒ³åƒã—ã¦ã€ä¸å¤‰æ¡ä»¶ã‚’3ã¤æ›¸ã„ã¦ã¿ã‚ˆã†ğŸ‘‡

* ã‚«ãƒ¼ãƒˆã«å•†å“ã‚’è¿½åŠ ã§ãã‚‹ğŸ›’
* æ•°é‡å¤‰æ›´ã§ãã‚‹ğŸ§®
* æ³¨æ–‡ç¢ºå®šã§ãã‚‹ğŸ“¦

âœ… æ›¸ãæ–¹ãƒ†ãƒ³ãƒ—ãƒ¬

* ã€Œã€œã®ã¨ãã€ã€œã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€

## è§£ç­”ä¾‹ğŸ’¡

* æ•°é‡ã¯ 1 ä»¥ä¸Šã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ğŸ§®âœ…
* Checkout å¾Œã¯å¤‰æ›´ã§ããªã„ğŸ”’
* å­˜åœ¨ã—ãªã„å•†å“ã¯å¤‰æ›´/å‰Šé™¤ã§ããªã„ğŸš«

---

## ãƒŸãƒ‹æ¼”ç¿’ 2ï¼šä¸å¤‰æ¡ä»¶ã‚’ Decide ã«è¶³ãã†ğŸ›¡ï¸â•

æ¬¡ã®ä¸å¤‰æ¡ä»¶ã‚’è¿½åŠ ã—ã¦ã¿ã‚ˆã†ğŸ‘‡

* ã€Œ1ã¤ã®ã‚«ãƒ¼ãƒˆã«å…¥ã‚Œã‚‰ã‚Œã‚‹å•†å“ç¨®é¡ã¯æœ€å¤§ 50ã€ğŸ§ºğŸ“¦

ãƒ’ãƒ³ãƒˆï¼š`state.items.size` ã‚’è¦‹ã‚‹ğŸ‘€

## è§£ç­”ä¾‹ğŸ’¡

```ts
type DomainError =
  | { type: "AlreadyCheckedOut" }
  | { type: "InvalidQty"; message: string }
  | { type: "ItemNotFound" }
  | { type: "CartIsEmpty" }
  | { type: "TooManyItemKinds" }; // è¿½åŠ 

// AddItem ã®ä¸­ã«è¿½åŠ 
if (!state.items.has(cmd.productId) && state.items.size >= 50) {
  return { ok: false, error: { type: "TooManyItemKinds" } };
}
```

---

## ã¡ã‚‡ã„å®Ÿå‹™ã£ã½ã„è©±ï¼šãƒ†ã‚¹ãƒˆã¯ä½•ã‚’ä½¿ã†ï¼ŸğŸ§ªâœ¨

TypeScriptã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¯ã€æœ€è¿‘ã ã¨ **Vitest** ã‚’é¸ã¶äººãŒå¢—ãˆã¦ã‚‹ã‚ˆï¼ˆTypeScript/ESMã«å¼·ãã¦ã€å§‹ã‚ã‚„ã™ã„ã®ãŒç‰¹å¾´ï¼‰ğŸ§ªâš¡ ([Vitest][2])

---

## AIæ´»ç”¨ï¼šä¸å¤‰æ¡ä»¶ã‚’â€œæ¼ã‚Œãªãâ€å‡ºã™ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹ğŸ¤–ğŸ’­âœ¨

## 1) ä¸å¤‰æ¡ä»¶ã®æ´—ã„å‡ºã—ğŸ§·

```text
é¡Œæï¼šã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ã‚«ãƒ¼ãƒˆ
æ©Ÿèƒ½ï¼šè¿½åŠ ã€æ•°é‡å¤‰æ›´ã€å‰Šé™¤ã€æ³¨æ–‡ç¢ºå®š
ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°å‰æã§ã€Œä¸å¤‰æ¡ä»¶ã€ã‚’10å€‹ã€åˆå¿ƒè€…å‘ã‘ã«æ—¥æœ¬èªã§åˆ—æŒ™ã—ã¦ã€‚
ãã‚Œãã‚Œã«ã€Œãªãœå¿…è¦ã‹ã€ã‚‚1è¡Œã§æ·»ãˆã¦ã€‚
```

## 2) ä¸å¤‰æ¡ä»¶ â†’ ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã¸å¤‰æ›ğŸ§ª

```text
ä»¥ä¸‹ã®ä¸å¤‰æ¡ä»¶ã‚’ Given/When/Then ã®ãƒ†ã‚¹ãƒˆè¦³ç‚¹ã«å¤‰æ›ã—ã¦ã€‚
å„ãƒ«ãƒ¼ãƒ«ã«ã¤ã OK1ã¤ + NG1ã¤ã€‚
- æ•°é‡ã¯1ä»¥ä¸Š
- Checkoutå¾Œã¯å¤‰æ›´ä¸å¯
- å­˜åœ¨ã—ãªã„å•†å“ã¯å¤‰æ›´ä¸å¯
```

## 3) Decide ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ãƒã‚§ãƒƒã‚¯ğŸ”

```text
æ¬¡ã® decide é–¢æ•°ã«ã¤ã„ã¦ã€
ã€Œä¸å¤‰æ¡ä»¶ãŒæ•£ã‚‰ã°ã£ã¦ãªã„ã‹ã€ã€ŒApplyã«ãƒ«ãƒ¼ãƒ«ãŒæ··ã–ã£ã¦ãªã„ã‹ã€
ã€Œã‚¨ãƒ©ãƒ¼ãŒãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã—ã¦åˆ†ã‹ã‚Šã‚„ã™ã„ã‹ã€ã‚’è¦³ç‚¹ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã€‚
æ”¹å–„æ¡ˆã‚‚ã‚³ãƒ¼ãƒ‰å·®åˆ†ã§ææ¡ˆã—ã¦ã€‚
```

ï¼ˆAIæ‹¡å¼µã¯ GitHub ã® Microsoft è£½å“ã‚„ã€OpenAI ç³»ã®é–‹ç™ºæ”¯æ´ãƒ„ãƒ¼ãƒ«ãªã©ã‚’æƒ³å®šã§OKã ã‚ˆğŸ¤–âœ¨ï¼‰

---

## ä»Šæ—¥ã®TypeScriptå‘¨è¾ºã®å°ãƒã‚¿ğŸ—ï¸âœ¨

* TypeScript 5.8 ç³»ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã¦ã€Nodeå‘ã‘ã® `--module node18` ãªã©ãŒæ•´ç†ã•ã‚Œã¦ã‚‹ã‚ˆğŸ“˜ ([TypeScript][3])
* Node.js ã¯ 2025-11-11 ã® v25.2.0 ã§ã€TypeScript ã® **type stripping ãŒ stable** ã«ãªã£ãŸï¼ˆ`.ts` ã‚’ç›´æ¥å®Ÿè¡Œã§ãã‚‹æµã‚ŒãŒå¼·ããªã£ã¦ããŸï¼‰âš¡ ([Node.js][4])

ã“ã®ç« ã®çµè«–ã¨ã—ã¦ã¯ã€ã©ã‚“ãªå®Ÿè¡Œæ–¹æ³•ã§ã‚‚é–¢ä¿‚ãªãğŸ‘‡
**ä¸å¤‰æ¡ä»¶ã¯ã€Œå®Ÿè¡Œæ™‚ã«å®ˆã‚‹ãƒ«ãƒ¼ãƒ«ã€ã ã‹ã‚‰ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã§æ˜ç¤ºçš„ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã®ãŒæ­£è§£**ğŸ›¡ï¸âœ¨

[1]: https://zod.dev/?utm_source=chatgpt.com "Zod: Intro"
[2]: https://vitest.dev/?utm_source=chatgpt.com "Vitest | Next Generation testing framework"
[3]: https://www.typescriptlang.org/docs/handbook/release-notes/typescript-5-8.html?utm_source=chatgpt.com "Documentation - TypeScript 5.8"
[4]: https://nodejs.org/en/blog/release/v25.2.0?utm_source=chatgpt.com "Node.js v25.2.0 (Current)"
